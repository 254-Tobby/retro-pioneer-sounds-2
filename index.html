<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sound System Store - Cart</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin:auto;
            border-style: solid;
            padding: 10px;
            background-color: rgba(25, 33, 105, 0.724);

        }
        .logo{
            position: relative;
            width:150px;
            height:auto;
        }
        header{
            font-family:'Courier New', Courier, monospace;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgb(49, 128, 211);
            color: white;
            padding: 10px 20px;
            margin-left: 20px;

        }

        footer {
            background:rgb(61, 138, 220);
            color: white;
            text-align: center;
        }
        .product-list {
            display: grid;
            grid-template-columns: repeat(6, 3fr);
            gap: 15px;
            padding: 20px;
        }
        .product {
            border: 1px solid #ddd;
            padding: 15px;
            text-align: center;
            background: #f9f9f9;
            border-radius: 8px;

        }
        .product img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            height: auto;
            display: block;
            margin: 0 auto 10px;
        }
        .cart-section {
            padding: 20px;
            max-width: 800px;
            margin: auto;
            color: rgb(87, 34, 34);
            font-weight: bold;
            border-radius: 20px;
            background-image:url("Music Stickers for Sale.jpeg");
            background-position: center;
            background-size: cover;
            background-repeat: no-repeat;
        }
        .cart-item {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            border-bottom: 1px solid #ddd;
        }
        .cart-summary {
            margin-top: 20px;
        }
        .checkout-btn {
            width: 100%;
            background: rgb(25, 67, 135);
            color: white;
            padding: 10px;
            border: none;
            cursor: pointer;
            border-radius: 10px;
        }
        .social-media img {
            width: 30px;
            height: 30px;
            margin: 5px;
        }
        @media (max-width: 1024px) {
                    .product-list {
                        grid-template-columns: repeat(3, 1fr);
                        margin:auto;
                    }
                }
                @media (max-width: 768px) {
                    .product-list {
                        grid-template-columns: repeat(2, 1fr); 
                        margin:auto; 
                }
                @media (max-width: 480px) {
                    .product-list {
                        grid-template-columns: repeat(1, 1fr);
                        margin:auto;
                    }
                    .cart-section,.Payment-Section {
                        width: 90%;
                        margin: auto;
                    }
                }
        #weather-widget {
            background: #007bff;
            color: white;
            padding: 10px;
            text-align: center;
            font-size: 14px;
            border-radius: 10px;
        }
        .paypal{background-color: #007bff;color: #f9f9f9;}
        .visa{background-color: #142C8E;color:white;}
        .mobile-money{background-color: #ffd700;color:black;}
    </style>
</head>
<body>

    <div id="weather-widget">Loading weather...</div>

<header>
    <h1>Sound System Store</h1>
    <img src="Modern Sound For Your Sticker.jpeg" alt="Sound System Store Logo" class="logo">
</header>

<main>
    <h2 style="text-align: center;">Products</h2>
    <div class="product-list" id="product-list"></div>

    <div class="cart-section">
        <h2>Your Basket</h2>
        <div id="cart-items"></div>

        <div class="cart-summary">
            <label>Voucher Code: <input type="text" id="voucher"></label>
            <br><br>
            <label>
                <input type="radio" name="shipping" value="standard" checked> Standard Shipping ($10)
            </label>
            <br>
            <label>
                <input type="radio" name="shipping" value="express"> Express Shipping ($25)
            </label>
            <br><br>
            <p>Subtotal: $<span id="subtotal">0.00</span></p>
            <p>Discount: $<span id="discount">0.00</span></p>
            <p>Shipping: $<span id="shipping-cost">10.00</span></p>
            <h3>Total: $<span id="total">0.00</span></h3>
        </div>
    </div>
    <div class="payment-section" id="payment-section">
        <h3>Select Payment Method</h3>
        <div class="payment-options">
            <button class="paypal" onclick="redirectToPayment('paypal')">Pay with PayPal</button>
            <button class="visa" onclick="redirectToPayment('visa')">Pay with Visa</button>
            <button class="m-pesa" onclick="redirectToPayment('m-pesa')">Pay with M-pesa</button>
        </div>  
        <div class="checkout-container">
            <h2>Checkout</h2>
            <p>Total Amount: <strong>$<span id="total-amount">0.00</span></strong></p>
            <button class="checkout-btn" onclick="checkout()">Checkout</button> 
            <h3 id="payment-status" style="color: green; display: none;">Payment Complete!</h3>
        </div>
    </div>
</main>

<footer>
    <p>&copy; 2025 Sound System Store ##BabyOnBoard Sounds##</p>
    <div class="social-media">
        <a href="https://www.facebook.com/"><img src="Facebook Logo PNG.jpeg" alt="Facebook"></a>
        <a href="https://www.instagram.com/"><img src="Instagram PNG.jpeg" alt="Instagram"></a>
        <a href="https://www.twitter.com/ @_Mumo-254"><img src="Twitter X Icon PNG.jpeg" alt="Twitter"></a>
        <a href="https://www.youtube.com/ TobiasNDANGILI"><img src="Youtube Logo PNG.jpeg" alt="YouTube"></a>
        <a href="https://www.linkedin.com/"><img src="Download Linkedin logo png, Linkedin logo transparent png, Linkedin icon transparent free png.jpeg" alt="LinkedIn"></a>
    </div>
</footer>

<script>
    const products = [
    { id:1, name:"Subwoofer",price:200,image:"Kicker 49L7X152 - SoloX L7X 15-Inch (38cm), 3_ Coil, Ferrite Competition Subwoofer, 2-Ohm.jpeg"},
    { id:2, name:"Monoblock",price:120,image:"Pioneer - 1600W Class D Mono Amplifier with Variable-Low Pass Filter - Brushed Gunmetal.jpeg"},
    { id:3, name:"Mid Range Speakers",price:150,image:"Pioneer Ts-a6968s 6_ x 9_ 4-Way 450w Max 4-Ohm Car Audio Coaxial Speaker, Black.jpeg"},
    { id:4, name:"Amplifier",price:250,image:"Pioneer GM-A5702.jpeg"},
    { id:5, name:"Tweeters",price:30,image:"Pioneer - 4_ - 2-way, 210 W Max Power, IMPP cone, 30mm Tweeter - Coaxial Speakers (pair) - Black.jpeg"},
    { id:6, name:"Equalizer",price:100,image:"Stetsom EQX764 - 7 Band EQ Equalizer.jpeg"},
    { id:7, name:"Cables",price:50,image:"deleyCON 20m Jack Cable 3_5mm AUX Cable Stereo Audio Cable Jack Plug Straight for PC Laptop Phone Smartphone Tablet Car HiFi Receiver - black.jpeg"},
    { id:8, name:"Custom Sound Box",price:200,image:"Single 10_ Custom Kerf Ported Subwoofer Box  (HAND MADE IN THE USA).jpeg"},
    { id:9, name:"Infortaniant System(Digital display) ",price:150,image:"950a1420-4c37-42a8-8b64-39d5975dc05d.jpeg"},
    { id:10, name:"Custom Lights",price:70,image:"OrcaJump - Luz Led Coche 1pc - Novedades en IluminaciÃ³n.jpeg"},
    { id:11, name:"Crossovers",price:110,image:"Cadence Processor Electronic Crossover Subwoofer.jpeg"},
    { id:12, name:"Bass Knob",price:7,image:"Amazon_com_ Nobsound Auto Car Amplifier Audio Subwoofer Bass Control Knob Sub Gain Equalizer Regulator Frequency Controller RCA Line Level Adjust _ Electronics.jpeg"},
    {id:13,name:"Capacitor",price:130,image:"12 tips for the best sound quality in your car.jpeg"},
    ];

    const shippingRates = { standard: 10, express: 25 };
    let cart=JSON.parse(localStorage.getItem("cart")) || [];

    function saveCart() {
        localStorage.setItem("cart", JSON.stringify(cart));
    }

    function renderProducts() {
        const productList = document.getElementById("product-list");
        products.forEach(product => {
            const productElement = document.createElement("div");
            productElement.classList.add("product");
            productElement.innerHTML = `
                <img src="${product.image}" alt="${product.name}">
                <h3>${product.name}</h3>
                <p>Price: $${product.price}</p>
                <label for="quantity-${product.id}">Quantity:</label>
                <input type="number" id="quantity-${product.id}" value="1" min="1">
                <button onclick="addToCart(${product.id})">Add to Cart</button>
            `;
            productList.appendChild(productElement);
        });
    }

    function addToCart(id) {
        const quantityInput=document.getElementById("quantity-${id}");
        const quantity=parseInt(quantityInput.value);
        const product = products.find(p => p.id === id);
        const existingItem = cart.find(item => item.id === id);
        if (existingItem) {
            existingItem.quantity+=quantity;
        } else {
            cart.push({ ...product, quantity});
        }
        saveCart();
        renderCart();
    }

    function removeFromCart(id) {
        const index = cart.findIndex(item => item.id === id);
        if (index !== -1) {
            if(cart[index].quantity>1){
                cart[index].quantity--;
            }else{
                cart.splice(index, 1);
            }
        }
        saveCart();
        renderCart();
    }

    function renderCart() {
        const cartItems = document.getElementById("cart-items");
        cartItems.innerHTML = "";
        cart.forEach(item => {
            const cartElement = document.createElement("div");
            cartElement.classList.add("cart-item");
            cartElement.innerHTML = `
            <span>${item.name} ($${item.price} x ${item.quantity})</span>
                <button onclick="removeFromCart(${item.id})">Remove</button>
            `;
            cartItems.appendChild(cartElement);
        });
        updateSummary();
    }

    function updateSummary() {
        let subtotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
        let discount = document.getElementById("voucher").value === "DISCOUNT10" ? subtotal * 0.1 : 0;
        let shipping = document.querySelector('input[name="shipping"]:checked').value;
        let shippingCost = shippingRates[shipping];
        let total = subtotal - discount + shippingCost;

        document.getElementById("subtotal").innerText = subtotal.toFixed(2);
        document.getElementById("discount").innerText = discount.toFixed(2);
        document.getElementById("shipping-cost").innerText = shippingCost.toFixed(2);
        document.getElementById("total").innerText = total.toFixed(2);
    }
    document.getElementById("total-amount").innerText = localStorage.getItem("cartTotal") || "0.00";
    function redirectToPayment(method) {
    let paymentURL = "";
    const totalAmount=document.getElementById("total").innerText;
    if (method === "paypal") {
        paymentURL = "https://www.paypal.com/checkout?amount=${totalAmount}";
    } else if (method === "visa") {
        paymentURL = "https://www.visa.co.ke/checkout?amount=${totalAmount}";
    } else if (method === "mobile-money") {
        paymentURL = "https://www.safaricom.co.ke/main-mpesa/checkout?amount=${totalAmount}";
    }

    if (paymentURL) {
        window.location.href = paymentURL;
    } else {
        alert("Invalid payment method.");
    }
}
    function checkout() {
        if (cart.length === 0) {
            alert("Your cart is empty!");
            return;
        }
        const totalAmount=document.getElementById("total").innerText
        alert("Checkout successful! Total: $" + totalAmount);
        cart.length = 0;
        saveCart();
        renderCart();
        document.getElementById("payment-status").style.display="block";  
    }
    document.getElementById("voucher").addEventListener("input", updateSummary);
    document.querySelectorAll('input[name="shipping"]').forEach(radio => {
        radio.addEventListener("change", updateSummary);
    });
    renderProducts();
    renderCart();
    async function fetchWeather(lat, lon) {
            const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current=temperature_2m,wind_speed_10m&hourly=temperature_2m,relative_humidity_2m,wind_speed_10m&timezone=auto`;

            try {
                const response = await fetch(url);
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                const data = await response.json();

                if (data.current) {
                    const temp = data.current.temperature_2m;
                    const windSpeed = data.current.wind_speed_10m;
                    const humidity = data.hourly.relative_humidity_2m[0];

                    document.getElementById("weather-widget").innerText = 
                        `ðŸŒ¤ï¸ Temp: ${temp}Â°C | ðŸ’¨ Wind: ${windSpeed} m/s | ðŸ’§ Humidity: ${humidity}%`;
                } else {
                    document.getElementById("weather-widget").innerText = "Weather data unavailable";
                }
            } catch (error) {
                console.error('Error fetching weather data:', error);
                document.getElementById("weather-widget").innerText = "Error fetching weather data";
            }
        }

        function getUserLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        fetchWeather(position.coords.latitude, position.coords.longitude);
                    },
                    () => {
                        fetchWeather(1.2921,36.8219);
                    }
                );
            } else {
                document.getElementById("weather-widget").innerText = "Geolocation not supported";
            }
        }

        getUserLocation();
    </script>
</script>
</body>
</html>